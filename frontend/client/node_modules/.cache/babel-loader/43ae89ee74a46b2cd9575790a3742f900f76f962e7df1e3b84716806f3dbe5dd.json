{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kamel.yehya\\\\Desktop\\\\TradeZ\\\\frontend\\\\client\\\\src\\\\components\\\\PopUpScreen\\\\index.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport Item from \"../../components/Item\";\nimport SearchBar from \"../../components/SearchBar\";\nimport ReactPaginate from 'react-paginate';\nimport LoadingSpinner from \"../../components/LoadingSpinner\";\nimport \"./popupScreen.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction PopupScreen(props) {\n  _s();\n  const [items, setItems] = useState('');\n  const [orderValue, setOrderValue] = useState(null);\n  const [orderDirectionValue, setOrderDirectionValue] = useState(null);\n  const [searchTextValue, setSearchTextValue] = useState(null);\n  const [itemOffset, setItemOffset] = useState(0);\n  const [currentItems, setCurrentItems] = useState([]);\n  const [pageCount, setPageCount] = useState(0);\n  const [isLoading, setIsLoading] = useState(false);\n  const itemsPerPage = 9;\n  useEffect(() => {\n    const endOffset = itemOffset + itemsPerPage;\n    setCurrentItems(items.slice(itemOffset, endOffset));\n    setPageCount(Math.ceil(items.length / itemsPerPage));\n    const controller = new AbortController();\n    getMyItems(controller);\n    return () => {\n      controller.abort();\n    };\n  }, [items.length, orderValue, orderDirectionValue, searchTextValue, itemOffset, itemsPerPage]);\n  const handlePageClick = event => {\n    const newOffset = event.selected * itemsPerPage % items.length;\n    setItemOffset(newOffset);\n  };\n  const getMyItems = controller => {\n    setIsLoading(true);\n    try {\n      const token = props.getCookie();\n      let reqInstance = axios.create({\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      console.log(\"token to be sent: \", token);\n      const url = \"http://localhost:3000/api/item\";\n      reqInstance.get(url, {\n        params: {\n          isMine: true,\n          order: orderValue,\n          orderDirection: orderDirectionValue,\n          searchText: searchTextValue\n        },\n        signal: controller.signal\n      }, {\n        withCredentials: true,\n        baseURL: 'http://localhost:3000'\n      }).then(_ref => {\n        let {\n          data: res\n        } = _ref;\n        setItems(res);\n        setIsLoading(false);\n      });\n    } catch (error) {\n      console.log(\"error: \", error);\n    }\n  };\n  const clickEvent = data => {\n    console.log(\"Enetered click event to trade\");\n    const token = props.getCookie();\n    const url = \"http://localhost:3000/api/trade/create\";\n    let reqInstance = axios.create({\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    const formData = new FormData();\n    formData.append(\"primaryItemId\", props._id);\n    formData.append(\"secondaryItemId\", data._id);\n    formData.append(\"secondaryUserId\", data.ownerId);\n    reqInstance.post(url, {\n      withCredentials: true,\n      baseURL: 'http://localhost:3000'\n    }).then(_ref2 => {\n      let {\n        data: res\n      } = _ref2;\n      console.log(\"performed trade: \", res);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pop-up-div d-flex flex-column col-10 offset-1 mt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-danger col-1\",\n        onClick: () => {\n          props.togglePopup();\n        },\n        children: \"X\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(SearchBar, {\n        setOrderValue: setOrderValue,\n        setOrderDirectionValue: setOrderDirectionValue,\n        setSearchTextValue: setSearchTextValue\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 13\n      }, this), isLoading === false && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex flex-wrap col-10 offset-2 justify-content-start mt-4\",\n          children: (() => {\n            console.log(\"current items: \", currentItems);\n            let container = [];\n            {\n              currentItems && currentItems.forEach((data, index) => {\n                console.log(\"single data is: \", data);\n                container.push( /*#__PURE__*/_jsxDEV(Item, {\n                  data: data,\n                  clickEvent: () => {\n                    clickEvent(data);\n                  }\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 120,\n                  columnNumber: 41\n                }, this));\n              });\n            }\n            return container;\n          })()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 21\n        }, this)\n      }, void 0, false), isLoading && /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 30\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"paginated-list-container\",\n        children: /*#__PURE__*/_jsxDEV(ReactPaginate, {\n          breakLabel: \"...\",\n          nextLabel: \"next >\",\n          onPageChange: handlePageClick,\n          pageRangeDisplayed: 5,\n          pageCount: pageCount,\n          previousLabel: \"< previous\",\n          renderOnZeroPageCount: null,\n          containerClassName: \"pagination\",\n          pageLinkClassName: \"page-num\",\n          previousLinkClassName: \"page-num\",\n          nextLinkClassName: \"page-num\",\n          activeLinkClassName: \"active\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n}\n_s(PopupScreen, \"b6EMKtoCwS1DAxx4qqnY86afogc=\");\n_c = PopupScreen;\nexport default PopupScreen;\nvar _c;\n$RefreshReg$(_c, \"PopupScreen\");","map":{"version":3,"names":["useState","useEffect","axios","Item","SearchBar","ReactPaginate","LoadingSpinner","PopupScreen","props","items","setItems","orderValue","setOrderValue","orderDirectionValue","setOrderDirectionValue","searchTextValue","setSearchTextValue","itemOffset","setItemOffset","currentItems","setCurrentItems","pageCount","setPageCount","isLoading","setIsLoading","itemsPerPage","endOffset","slice","Math","ceil","length","controller","AbortController","getMyItems","abort","handlePageClick","event","newOffset","selected","token","getCookie","reqInstance","create","headers","Authorization","console","log","url","get","params","isMine","order","orderDirection","searchText","signal","withCredentials","baseURL","then","data","res","error","clickEvent","formData","FormData","append","_id","ownerId","post","togglePopup","container","forEach","index","push"],"sources":["C:/Users/kamel.yehya/Desktop/TradeZ/frontend/client/src/components/PopUpScreen/index.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport Item from \"../../components/Item\";\r\nimport SearchBar from \"../../components/SearchBar\";\r\nimport ReactPaginate from 'react-paginate';\r\nimport LoadingSpinner from \"../../components/LoadingSpinner\";\r\nimport \"./popupScreen.css\";\r\n\r\nfunction PopupScreen(props) {\r\n\r\n    const [items, setItems] = useState('');\r\n    const [orderValue, setOrderValue ] = useState(null);\r\n    const [orderDirectionValue, setOrderDirectionValue] = useState(null);\r\n    const [searchTextValue, setSearchTextValue] = useState(null);\r\n    const [itemOffset, setItemOffset] = useState(0);\r\n    const [currentItems, setCurrentItems] = useState([]);\r\n    const [pageCount, setPageCount] = useState(0);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const itemsPerPage = 9;\r\n\r\n\r\n    useEffect(() => {\r\n        const endOffset = itemOffset + itemsPerPage;\r\n        setCurrentItems(items.slice(itemOffset, endOffset));\r\n        setPageCount(Math.ceil(items.length / itemsPerPage));\r\n        const controller = new AbortController();\r\n        getMyItems(controller);\r\n        return ()=>{\r\n            controller.abort();\r\n        };\r\n    }, \r\n    [items.length, orderValue, orderDirectionValue, searchTextValue, itemOffset, itemsPerPage]);\r\n\r\n    const handlePageClick = (event) => {\r\n        const newOffset = (event.selected * itemsPerPage) % items.length;\r\n        setItemOffset(newOffset);\r\n      };\r\n\r\n    const getMyItems = (controller) => {\r\n        setIsLoading(true);\r\n        try {\r\n            const token = props.getCookie();\r\n            let reqInstance = axios.create({\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`\r\n                }\r\n            });\r\n            console.log(\"token to be sent: \", token);\r\n            const url = \"http://localhost:3000/api/item\";\r\n\r\n            reqInstance.get(\r\n                url, \r\n                { \r\n                    params: { \r\n                        isMine: true,\r\n                        order: orderValue,\r\n                        orderDirection: orderDirectionValue,\r\n                        searchText: searchTextValue\r\n                    },\r\n                    signal: controller.signal\r\n                },\r\n                {\r\n                    withCredentials: true,\r\n                    baseURL: 'http://localhost:3000'\r\n                }\r\n            ).then(({data: res}) => { \r\n                setItems(res); \r\n                setIsLoading(false);\r\n            });\r\n        \r\n        } catch (error) { \r\n            console.log(\"error: \", error);\r\n        }\r\n    }\r\n\r\n    const clickEvent = (data) => {\r\n\r\n        console.log(\"Enetered click event to trade\");\r\n        const token = props.getCookie();\r\n        const url = \"http://localhost:3000/api/trade/create\";\r\n\r\n        let reqInstance = axios.create({\r\n            headers: {\r\n                Authorization: `Bearer ${token}`\r\n            }\r\n        });\r\n        const formData = new FormData();\r\n        formData.append(\"primaryItemId\", props._id);\r\n        formData.append(\"secondaryItemId\", data._id);\r\n        formData.append(\"secondaryUserId\", data.ownerId);\r\n\r\n        reqInstance.post(\r\n            url, \r\n            {\r\n                withCredentials: true,\r\n                baseURL: 'http://localhost:3000'\r\n            }\r\n        ).then(({data: res}) => { \r\n            console.log(\"performed trade: \", res);\r\n        });\r\n    }\r\n\r\n\treturn (\r\n    <>\r\n        <div className=\"pop-up-div d-flex flex-column col-10 offset-1 mt-4\">\r\n            <button className = \"btn btn-danger col-1\" onClick={() => {props.togglePopup()}}>X</button>\r\n            <SearchBar setOrderValue={setOrderValue} setOrderDirectionValue={setOrderDirectionValue} setSearchTextValue={setSearchTextValue} />\r\n            {\r\n                isLoading === false && \r\n                <>\r\n                    <div className=\"d-flex flex-wrap col-10 offset-2 justify-content-start mt-4\">\r\n                        {\r\n                            (() => {\r\n                                console.log(\"current items: \", currentItems);\r\n                                let container = [];\r\n                                {\r\n                                    currentItems && currentItems.forEach((data, index) => {\r\n                                    console.log(\"single data is: \", data);\r\n                                    container.push(\r\n                                        <Item key={index} data={data} clickEvent={() => {clickEvent(data)}}/>\r\n                                    )\r\n                                    })\r\n                                }\r\n                                return container;\r\n                            })()\r\n                        }\r\n                    </div>\r\n                </>\r\n            }   \r\n            {\r\n                isLoading && <LoadingSpinner />\r\n            }\r\n            <div className=\"paginated-list-container\">\r\n                <ReactPaginate\r\n                    breakLabel=\"...\"\r\n                    nextLabel=\"next >\"\r\n                    onPageChange={handlePageClick}\r\n                    pageRangeDisplayed={5}\r\n                    pageCount={pageCount}\r\n                    previousLabel=\"< previous\"\r\n                    renderOnZeroPageCount={null}\r\n                    containerClassName=\"pagination\"\r\n                    pageLinkClassName=\"page-num\"\r\n                    previousLinkClassName=\"page-num\"\r\n                    nextLinkClassName=\"page-num\"\r\n                    activeLinkClassName=\"active\"\r\n                />\r\n            </div>\r\n        </div>\r\n    </>\r\n\t);\r\n}\r\n\r\nexport default PopupScreen;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}